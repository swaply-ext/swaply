.chat-root{
  display:flex;
  height:100vh;
  background: #f8f9fb;
  color: #222;
}

.chat-side{
  width:320px;
  border-right:1px solid #e6e6e6;
  padding:12px;
  box-sizing:border-box;
  overflow:auto;
  background: #fff;
}

.chat-main{
  flex:1;
  display:flex;
  flex-direction:column;
}

.search-box input{
  width:100%;
  padding:8px;
  box-sizing:border-box;
  border:1px solid #ddd;
  border-radius:6px;
  background: #fbfbfb;
}

.conversations h4, .users-search h4{ margin:8px 0; color:#666 }
.conversations ul, .users-search ul{ list-style:none; padding:0; margin:0 }

.conversations li, .users-search li{
  padding:8px;
  border-bottom:1px solid #f2f2f2;
  cursor:pointer;
  display:flex;
  align-items:center;
  gap:10px;
}

.conversations li.active{ background:#f7f7f7 }

/* Avatar rules: force reasonable sizes and cover */
.conversations li .avatar,
.users-search li .avatar,
.chat-header .avatar{
  width:40px;
  height:40px;
  border-radius:50%;
  overflow:hidden;
  flex:0 0 40px;
  background:#e9e9e9;
}

.conversations li .avatar img,
.users-search li .avatar img,
.chat-header .avatar img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
}

/* Header layout (avatar + title) */
.chat-header{
  padding:12px;
  border-bottom:1px solid #eee;
  background:#fafafa;
}
.chat-header .header-row{ display:flex; align-items:center; gap:12px }
.chat-header .title{ font-weight:600 }
.chat-header .subtitle{ font-size:0.9rem; color:#666 }

/* Specific selector for implementations that put the class on the IMG directly */
.chat-header-left{ display:flex; align-items:center; gap:12px }
.chat-header-avatar{
  width:48px !important;
  height:48px !important;
  border-radius:50% !important;
  object-fit:cover !important;
  overflow:hidden !important;
  flex:0 0 48px !important;
  display:block !important;
}

.chat-messages{ flex:1; padding:16px; overflow:auto; background:transparent }

.message{ margin-bottom:12px; display:flex; gap:8px; align-items:flex-end }
.message{ max-width:70%; }

.message.mine{ align-self:flex-end; text-align:right; flex-direction:row-reverse }
.message:not(.mine){ align-self:flex-start; text-align:left }

/* Avatar small inside messages */
.message .msg-avatar{
  width:28px; height:28px; border-radius:50%; overflow:hidden; flex:0 0 28px;
}
.message .msg-avatar img{ width:100%; height:100%; object-fit:cover }

.msg-text{ display:inline-block; padding:10px 14px; border-radius:14px; background:#f1f0f0; box-shadow:0 1px 0 rgba(0,0,0,0.03) }
.message.mine .msg-text{ background:#dcf8c6 }
.msg-time{ font-size:0.75rem; color:#9b9b9b; margin-top:6px }

.chat-input{ padding:12px; border-top:1px solid #eee; display:flex; gap:8px; background:#fff }
.chat-input input{ flex:1; padding:10px; border:1px solid #ddd; border-radius:8px }
.chat-input button{ padding:8px 12px; border-radius:8px; background:#0d6efd; color:#fff; border:none }

/* Make sure generic images never overflow */
.chat-root img{ max-width:100%; height:auto; }

@media (max-width:800px){
  .chat-root{ flex-direction:column }
  .chat-side{ width:100%; height:200px }
}
