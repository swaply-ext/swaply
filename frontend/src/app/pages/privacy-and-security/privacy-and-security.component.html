<app-app-navbar></app-app-navbar>
<div class="page-wrapper">
  <div class="profile-page-container">
    <div class="profile-bottom-row">
      <aside class="profile-side-layout">
        <app-side-menu></app-side-menu>
      </aside>

      <main class="profile-info-container">
        <div class="panel-row">
          <section class="panel panel-security">
            <h2>Cambiar Contraseña</h2>

            <div class="form-group">
              <div class="password-wrapper">
                <input [type]="showCurrent ? 'text' : 'password'" [(ngModel)]="currentPassword"
                  placeholder="Contraseña actual" />
                <span class="material-icons toggle-icon" (click)="toggleVisibility('current')">
                  {{ showCurrent ? "visibility_off" : "visibility" }}
                </span>
              </div>
              <div class="password-wrapper">
                <input [type]="showNew ? 'text' : 'password'" [(ngModel)]="newPassword"
                  (ngModelChange)="onNewPasswordChange($event)" placeholder="Nueva contraseña" />
                <span class="material-icons toggle-icon" (click)="toggleVisibility('new')">
                  {{ showNew ? "visibility_off" : "visibility" }}
                </span>
              </div>

              <div class="password-wrapper">
                <input [type]="showConfirm ? 'text' : 'password'" [(ngModel)]="confirmPassword"
                  placeholder="Confirmar nueva contraseña" />
                <span class="material-icons toggle-icon" (click)="toggleVisibility('confirm')">
                  {{ showConfirm ? "visibility_off" : "visibility" }}
                </span>
              </div>
              <div class="actions-row">
                <a routerLink="/recovery-password" class="forgot-password-link">
                  <strong>He olvidado la contraseña.</strong>
                </a>
                <button class="send-button btn btn-primary" type="button" (click)="submitNewPassword()">
                  Guardar
                </button>
              </div>

            </div>

            <p *ngIf="showError" class="error-message">{{ message }}</p>

            <p *ngIf="showSuccess" class="success-message">
              {{ successMessage }}
            </p>


          </section>

          <section class="panel panel-2fa">
            <h2>Autenticación de dos factores (2FA)</h2>

            <p class="panel-description">
              Añade una capa extra de seguridad a tu cuenta. Al iniciar sesión,
              se te pedirá un código de verificación además de tu contraseña.
            </p>

            <label class="toggle-switch">
              <input type="checkbox" />
              <span class="toggle-slider"></span>
            </label>
          </section>
        </div>

        <section class="panel panel-privacy">
          <h2>Privacidad de Cuenta</h2>

          <div class="blocked-users-card">
            <span class="blocked-users-title">Usuarios bloqueados</span>
            <p class="blocked-users-description">
              Los usuarios que bloquees no podrán enviarte mensajes ni ver tu
              perfil.
            </p>

            <button class="btn btn-primary btn-small">
              Gestionar usuarios bloqueados
            </button>
          </div>

          <div class="delete-account-row">
            <button type="button" class="delete-account-link" (click)="onDeleteAccount()">
              Eliminar mi cuenta permanentemente
            </button>
          </div>
        </section>
      </main>
    </div>
  </div>
</div>